<%= summary_protein_within %>
<canvas id="myChart" data-turbolinks="true"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // === include 'setup' then 'config' above ===
  var DATA_COUNT = 1;
  var NUMBER_CFG = {count: DATA_COUNT, min: 0, max: 100};

  var data = {
    // labels: ['Red', 'Orange'],
    datasets: [
      {
        label: 'Dataset 1',
        data: [80, 0],
        // data: [<%= summary_protein_within %>,  ((<%= summary_protein_within %>) <= 80) ?  (80 - <%= summary_protein_within %>) : 0],
        // data: [50, 40],
        backgroundColor: Object.values([
                                        '#4dc9f6',
                                        '#f67019'
                                      ]),
      }
    ]
  };

  var config = {
    type: 'pie',
    data: data,
    options: {
      transition: false,
      animation: {

        },
      plugins: {
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'I dont want this pie to refresh'
        }
      }
    },
  };

  var myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
  // myChart.update();


  // function addData(){

    myChart.data.datasets[0].data[0] += (80 - document.getElementById("price").innerHTML)
    myChart.data.datasets[0].data[1] -= (80 + document.getElementById("price").innerHTML)
    myChart.update();
//   }
// setTimeout(addData, 2000)
</script>
